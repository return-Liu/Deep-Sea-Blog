import{e as d,u as ye,P as ke,A as we,Q as he,R as Ce,S as Se,n as re,E as F,i as xe,d as Ve,c as y,a as n,w as a,h as t,j as S,r,T as Me,o as m,f as s,t as $,x as be,g as ze,O as Ue,U as de,V as ue,k as ce,y as b,z as H,N as Ae,m as pe}from"./index-BDg1WjkS.js";import{_ as Be}from"./_plugin-vue_export-helper-DlAUqK2U.js";function Te(){var O;const v=xe(),k=d(""),X=d(!1),f=d(!1),z=ye(),w=ke(()=>z.user),u=d(!1),P=d("rtl"),Q=d("30%"),U=d(!1),x=d([]),V=d(!1),h=d({title:"",content:"",userId:((O=w.value)==null?void 0:O.id)||4}),A=()=>{u.value=!0};async function M(){try{const D=(await re.get("/admin/update")).data.data.updates;x.value=D.map(N=>({...N,formattedCreatedAt:new Date(N.createdAt).toLocaleString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1})}))}catch(e){console.error("获取更新信息失败",e),F.error("获取更新信息失败")}}async function B(){var e;try{await re.post("/admin/update",h.value),M(),h.value={title:"",content:"",userId:((e=w.value)==null?void 0:e.id)||4},F.success("新增更新信息成功"),u.value=!1,V.value=!1}catch{F.error("新增更新信息失败")}}we(()=>{M()});const T=he([{name:"由于异常问题,暂时无法完成相关功能"},{name:"目前已排查所有的问题，请耐心等待"}]),I=e=>{k.value=e.target.value},R=()=>{f.value=!0},K=()=>{k.value||setTimeout(()=>{f.value=!1},8e3)},W=()=>{f.value=!0},c=()=>{f.value=!1},p=()=>{v.push({path:"/setting/personals"})},_=()=>{v.push({path:"/setting/securitys"})},i=()=>{v.push({path:"/setting/likes"})},C=()=>{v.push({path:"/setting/modes"})},j=()=>{v.push({path:"/setting/layouts"})};async function L(){try{v.push({name:"search",query:{keyword:k.value}})}catch{F.error("搜索失败,请稍后再试")}}return{Search:Ce,isSearchActive:X,Message:Se,openSettings:C,goToLikedArticles:i,searchQuery:k,isScrollingPaused:f,text:T,handleInput:I,changeSetting:p,viewAccountSecurity:_,handleFocus:R,handleBlur:K,handleMouseEnter:W,handleMouseLeave:c,viewMessage:A,handleSearch:L,direction:P,size:Q,addUpdate:B,showDialog:V,showInfoCard:U,newUpdate:h,user:w,drawerVisible:u,updates:x,viewWall:j,goToBlog:()=>{window.open("http://localhost:5174/home","_blank")}}}const Ie={class:"search-box"},Le={class:"search-input"},De={class:"scrolling-text"},Ne={class:"carousel-text"},Ee={class:"search-icon"},Fe={class:"avatar-box"},$e=["title"],He=["title"],Pe={class:"info-card-header"},Qe={class:"info-card-avatar"},Re=["title"],Ke=["title"],We={class:"info-card-content"},je={class:"info-card-item"},qe={class:"drawer-content"},Oe={class:"update-content"},Ge={class:"update-title"},Je={class:"update-description"},Xe={class:"update-time-text"},Ye=Ve({__name:"CommonHeader",setup(v){let{Search:k,isSearchActive:X,Message:f,openSettings:z,goToLikedArticles:w,searchQuery:u,isScrollingPaused:P,text:Q,handleInput:U,changeSetting:x,viewAccountSecurity:V,handleFocus:h,handleBlur:A,handleMouseEnter:M,handleMouseLeave:B,viewMessage:T,handleSearch:I,direction:R,size:K,addUpdate:W,showDialog:c,showInfoCard:p,newUpdate:_,user:i,drawerVisible:C,updates:j,viewWall:L,goToBlog:q}=Te();return(O,e)=>{const D=r("el-carousel-item"),N=r("el-carousel"),G=r("el-icon"),me=r("el-header"),ve=r("clock"),Y=r("el-button"),fe=r("el-drawer"),Z=r("el-input"),J=r("el-form-item"),_e=r("el-form"),ge=r("el-dialog"),ee=Me("lazy");return m(),y("div",null,[n(me,null,{default:a(()=>{var l,g,E,te,oe,se,ne,le,ae,ie;return[s("div",Ie,[s("div",Le,[$(s("input",{type:"text",class:"search-input-text",onInput:e[0]||(e[0]=(...o)=>t(U)&&t(U)(...o)),onFocus:e[1]||(e[1]=(...o)=>t(h)&&t(h)(...o)),onBlur:e[2]||(e[2]=(...o)=>t(A)&&t(A)(...o)),onMouseenter:e[3]||(e[3]=(...o)=>t(M)&&t(M)(...o)),onMouseleave:e[4]||(e[4]=(...o)=>t(B)&&t(B)(...o)),"onUpdate:modelValue":e[5]||(e[5]=o=>S(u)?u.value=o:u=o),onKeyup:e[6]||(e[6]=ze((...o)=>t(I)&&t(I)(...o),["enter"]))},null,544),[[be,t(u)]]),$(s("div",De,[n(N,{direction:"vertical",autoplay:!t(P),interval:7e3},{default:a(()=>[(m(!0),y(de,null,ue(t(Q),o=>(m(),ce(D,{key:o.name},{default:a(()=>[s("h3",Ne,b(o.name),1)]),_:2},1024))),128))]),_:1},8,["autoplay"])],512),[[Ue,!t(u)]])]),s("div",Ee,[n(G,{size:15,color:"#000"},{default:a(()=>[n(t(k))]),_:1})])]),s("div",Fe,[s("div",{class:"email-box",title:"系统邮箱",onClick:e[7]||(e[7]=(...o)=>t(T)&&t(T)(...o))},[n(G,{size:30,color:"#0078d4"},{default:a(()=>[n(t(f))]),_:1})]),s("div",{class:"avatar-img",onMouseenter:e[15]||(e[15]=o=>S(p)?p.value=!0:p=!0)},[(l=t(i))!=null&&l.avatar?$((m(),y("img",{key:0,alt:"头像",title:`${((g=t(i))==null?void 0:g.nickname)||"默认用户"}的头像`},null,8,$e)),[[ee,(E=t(i))==null?void 0:E.avatar]]):H("",!0),t(p)?(m(),y("div",{key:1,title:`${((te=t(i))==null?void 0:te.nickname)||"默认用户"}的信息面板`,class:"info-card",onMouseleave:e[14]||(e[14]=o=>S(p)?p.value=!1:p=!1)},[s("div",Pe,[s("div",Qe,[(oe=t(i))!=null&&oe.avatar?$((m(),y("img",{key:0,alt:"头像",title:`${((se=t(i))==null?void 0:se.nickname)||"默认用户"}的头像`},null,8,Re)),[[ee,(ne=t(i))==null?void 0:ne.avatar]]):H("",!0)]),s("div",{class:"info-card-name",title:`${((le=t(i))==null?void 0:le.nickname)||"默认用户"}的昵称`,style:Ae({color:((ae=t(i))==null?void 0:ae.nicknameColor)||"#000"})},b((ie=t(i))==null?void 0:ie.nickname),13,Ke),s("div",{class:"info-card-enter",onClick:e[8]||(e[8]=(...o)=>t(q)&&t(q)(...o))},e[21]||(e[21]=[s("span",null,"进入博客",-1)]))]),s("div",We,[s("div",je,[s("p",{onClick:e[9]||(e[9]=(...o)=>t(x)&&t(x)(...o))},"我的资料"),e[22]||(e[22]=s("span",null,null,-1)),s("p",{onClick:e[10]||(e[10]=(...o)=>t(V)&&t(V)(...o))},"账号安全"),e[23]||(e[23]=s("span",null,null,-1)),s("p",{onClick:e[11]||(e[11]=(...o)=>t(w)&&t(w)(...o))},"我的点赞"),e[24]||(e[24]=s("span",null,null,-1)),s("p",{onClick:e[12]||(e[12]=(...o)=>t(z)&&t(z)(...o))},"模式选择"),e[25]||(e[25]=s("span",null,null,-1)),s("p",{onClick:e[13]||(e[13]=(...o)=>t(L)&&t(L)(...o))},"界面布局")])])],40,He)):H("",!0)],32)])]}),_:1}),n(fe,{title:"系统邮箱",modelValue:t(C),"onUpdate:modelValue":e[17]||(e[17]=l=>S(C)?C.value=l:C=l),direction:t(R),"close-on-click-modal":!1,size:t(K)},{default:a(()=>{var l;return[s("div",qe,[(m(!0),y(de,null,ue(t(j),(g,E)=>(m(),y("div",{key:E,class:"update-item"},[s("div",Oe,[s("p",Ge,b(g.title),1),s("p",Je,b(g.content),1),s("p",Xe,[n(G,{size:16,color:"#909399"},{default:a(()=>[n(ve)]),_:1}),pe(" 更新时间: "+b(g.formattedCreatedAt),1)])])]))),128))]),((l=t(i))==null?void 0:l.id)===4?(m(),ce(Y,{key:0,type:"primary",class:"drawer-close-button",icon:"el-icon-plus",onClick:e[16]||(e[16]=g=>S(c)?c.value=!0:c=!0)},{default:a(()=>e[26]||(e[26]=[s("p",null,"+",-1)])),_:1})):H("",!0)]}),_:1},8,["modelValue","direction","size"]),n(ge,{title:"新增更新信息",modelValue:t(c),"onUpdate:modelValue":e[20]||(e[20]=l=>S(c)?c.value=l:c=l),width:"50%"},{default:a(()=>[n(_e,{model:t(_),"label-width":"100px"},{default:a(()=>[n(J,{label:"标题"},{default:a(()=>[n(Z,{modelValue:t(_).title,"onUpdate:modelValue":e[18]||(e[18]=l=>t(_).title=l)},null,8,["modelValue"])]),_:1}),n(J,{label:"更新内容"},{default:a(()=>[n(Z,{type:"textarea",modelValue:t(_).content,"onUpdate:modelValue":e[19]||(e[19]=l=>t(_).content=l)},null,8,["modelValue"])]),_:1}),n(J,null,{default:a(()=>[n(Y,{type:"primary",onClick:t(W)},{default:a(()=>e[27]||(e[27]=[pe("新增")])),_:1},8,["onClick"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])])}}}),tt=Be(Ye,[["__scopeId","data-v-a24f0bf4"]]);export{tt as default};
