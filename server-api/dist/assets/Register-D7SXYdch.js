import{d as V,e as f,c as y,f as m,a as l,w as n,g as b,h as r,i as x,r as d,o as C,m as h,q as E,n as c,E as o}from"./index-DaoAQrrJ.js";import{_ as K}from"./_plugin-vue_export-helper-DlAUqK2U.js";const R={class:"register-container"},F={class:"register-card"},N=V({__name:"Register",setup(U){const _=x();let e=f({username:"",nickname:"",email:"",password:""}),k=f(null),g=()=>e.value.username?e.value.nickname?e.value.email?e.value.password?!0:(o.error("请输入密码~"),!1):(o.error("请输入邮箱~"),!1):(o.error("请输入昵称~"),!1):(o.error("请输入用户名~"),!1),w=async()=>{try{return await c.post("/auth/check",{nickname:e.value.nickname,email:e.value.email}),!0}catch{return o.error("昵称或邮箱已存在，请更换~"),!1}},p=async()=>{if(g()&&await w())try{const t=await c.post("/auth/sign_up",{username:e.value.username,nickname:e.value.nickname,email:e.value.email,password:e.value.password});console.log(t.data),t.data.status?(o.success("注册成功"),_.push({path:"/login"})):o.error(t.data.message)}catch(t){o.error("注册失败，请重试"),console.error("注册失败:",t)}};return(t,a)=>{const i=d("el-input"),u=d("el-form-item"),v=d("el-button");return C(),y("div",R,[m("div",F,[a[5]||(a[5]=m("h2",{class:"register-title"},"逸刻时光-YiKe注册",-1)),l(r(E),{onKeydown:b(r(p),["enter"]),model:r(e),ref_key:"registerFormRef",ref:k},{default:n(()=>[l(u,{label:"用户名",prop:"username"},{default:n(()=>[l(i,{modelValue:r(e).username,"onUpdate:modelValue":a[0]||(a[0]=s=>r(e).username=s),placeholder:"请输入用户名"},null,8,["modelValue"])]),_:1}),l(u,{label:"昵称",prop:"nickname"},{default:n(()=>[l(i,{modelValue:r(e).nickname,"onUpdate:modelValue":a[1]||(a[1]=s=>r(e).nickname=s),placeholder:"请输入昵称"},null,8,["modelValue"])]),_:1}),l(u,{label:"邮箱",prop:"email"},{default:n(()=>[l(i,{modelValue:r(e).email,"onUpdate:modelValue":a[2]||(a[2]=s=>r(e).email=s),placeholder:"请输入邮箱"},null,8,["modelValue"])]),_:1}),l(u,{label:"密码",prop:"password"},{default:n(()=>[l(i,{type:"password",modelValue:r(e).password,"onUpdate:modelValue":a[3]||(a[3]=s=>r(e).password=s),placeholder:"请输入密码"},null,8,["modelValue"])]),_:1}),l(u,null,{default:n(()=>[l(v,{type:"primary",onClick:r(p),class:"register-button"},{default:n(()=>a[4]||(a[4]=[h(" 注册 ")])),_:1},8,["onClick"])]),_:1})]),_:1},8,["onKeydown","model"]),a[6]||(a[6]=m("p",{class:"register-tip"}," 该注册账号只限于逸刻时光-YiKe网站内测试、学习，请妥善保护自己个人隐私和个人信息，以免造成不必要的影响，谢谢。 ",-1))])])}}}),q=K(N,[["__scopeId","data-v-aa7e9406"]]);export{q as default};
