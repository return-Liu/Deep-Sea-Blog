import{d as S,e as l,a3 as M,c as o,f as s,z as B,s as b,t as k,N as g,x as r,y as f,a as _,w as x,ac as y,o as i,m as V,n as D}from"./index-DaoAQrrJ.js";import{_ as T}from"./_plugin-vue_export-helper-DlAUqK2U.js";const U={class:"suggestions-feedback"},z={class:"feedback-container"},I={class:"form-group"},P={key:0,class:"error-text"},$={class:"form-group"},h={key:0,class:"error-text"},j={class:"form-group"},q={key:0,class:"error-text"},A=["disabled"],G={key:0,class:"success-message"},H={key:0,class:"error-message"},J=S({__name:"SuggestionsFeedback",setup(K){const n=l(""),u=l(""),d=l(!1),v=l(""),c=l(""),p=l(""),a=M({name:"",email:"",feedback:""}),w=()=>a.name?(v.value="",!0):(v.value="姓名不能为空",!1),N=()=>{const t=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;return a.email?t.test(a.email)?(c.value="",!0):(c.value="电子邮件格式不正确",!1):(c.value="电子邮件不能为空",!1)},C=()=>a.feedback?(p.value="",!0):(p.value="反馈内容不能为空",!1),E=()=>w()&&N()&&C(),F=async()=>{if(!d.value&&E()){d.value=!0;try{const t=await D.post("/admin/feedback",a);t.data.status?(n.value="感谢你的反馈！我们会认真考虑你的建议",u.value="",a.name="",a.email="",a.feedback=""):(u.value=t.data.message,n.value="")}catch(t){console.error("提交反馈失败",t),u.value="提交反馈失败，请稍后再试",n.value=""}finally{d.value=!1}}};return(t,e)=>(i(),o("div",U,[s("div",z,[e[8]||(e[8]=s("h1",{class:"title"},"建议与反馈",-1)),e[9]||(e[9]=s("p",{class:"subtitle"},"你的反馈对我们很重要",-1)),s("form",{onSubmit:B(F,["prevent"]),class:"feedback-form"},[s("div",I,[e[3]||(e[3]=s("label",{for:"name"},"姓名",-1)),b(s("input",{type:"text",id:"name","onUpdate:modelValue":e[0]||(e[0]=m=>a.name=m),class:g({"input-filled":a.name}),placeholder:"请输入你的姓名"},null,2),[[k,a.name]]),v.value?(i(),o("p",P,r(v.value),1)):f("",!0)]),s("div",$,[e[4]||(e[4]=s("label",{for:"email"},"电子邮件",-1)),b(s("input",{type:"email",id:"email","onUpdate:modelValue":e[1]||(e[1]=m=>a.email=m),class:g({"input-filled":a.email}),placeholder:"请输入你的邮箱"},null,2),[[k,a.email]]),c.value?(i(),o("p",h,r(c.value),1)):f("",!0)]),s("div",j,[e[5]||(e[5]=s("label",{for:"feedback"},"建议与反馈",-1)),b(s("textarea",{id:"feedback","onUpdate:modelValue":e[2]||(e[2]=m=>a.feedback=m),class:g({"input-filled":a.feedback}),placeholder:"请详细描述你的建议或反馈...",rows:"5"},null,2),[[k,a.feedback]]),p.value?(i(),o("p",q,r(p.value),1)):f("",!0)]),s("button",{type:"submit",disabled:d.value},r(d.value?"提交中...":"提交反馈"),9,A)],32),_(y,{name:"fade"},{default:x(()=>[n.value?(i(),o("div",G,[e[6]||(e[6]=s("i",{class:"success-icon"},"✓",-1)),V(" "+r(n.value),1)])):f("",!0)]),_:1}),_(y,{name:"fade"},{default:x(()=>[u.value?(i(),o("div",H,[e[7]||(e[7]=s("i",{class:"error-icon"},"✕",-1)),V(" "+r(u.value),1)])):f("",!0)]),_:1})])]))}}),Q=T(J,[["__scopeId","data-v-0c21bfab"]]);export{Q as default};
