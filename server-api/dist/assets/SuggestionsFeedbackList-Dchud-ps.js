import{d as z,e as D,A as B,c as o,f as s,m as d,U as N,V as U,n as p,r as _,o as a,a as r,y as l,w as F,E}from"./index-BDg1WjkS.js";import{_ as M}from"./_plugin-vue_export-helper-DlAUqK2U.js";const W={class:"dashboard-container"},R={class:"feedback-section"},$={key:0,class:"card-list"},T={class:"card-header"},j={class:"user-meta"},q={class:"email"},G={class:"timestamp"},H={class:"card-content"},J={class:"feedback-text"},K={key:1,class:"empty-state"},O={class:"report-section"},P={key:0,class:"report-list"},Q={class:"report-meta"},X={class:"meta-item"},Y={class:"meta-item"},Z={class:"meta-item"},ss=["onClick"],ts={class:"info-columns"},es={class:"info-card reporter-info"},ls={class:"info-title"},ns={class:"icon icon-user"},os={class:"reporter-info"},as={class:"reporter-email"},is={class:"reporter-nickname"},ds={class:"reporter-time"},rs={class:"info-card wall-info"},cs={class:"wall-content"},us={class:"wall-id"},ms={class:"wall-title"},ps={class:"wall-content"},_s={class:"wall-image"},fs=["src"],gs={class:"wall-like"},hs={class:"wall-category"},vs={class:"wall-time"},ws={class:"info-card publisher-info"},ks={class:"info-title"},ys={class:"icon icon-publisher"},bs={class:"publisher-info"},Cs={class:"publisher-email"},As={class:"publisher-nickname"},Ls={class:"publisher-time"},xs={key:1,class:"empty-state"},Ss=z({__name:"SuggestionsFeedbackList",setup(Ds){const c=D([]),u=D([]),I=async()=>{try{const t=(await p.get("/admin/feedback")).data.data.feedbacks;c.value=t.map(i=>({...i,formattedCreatedAt:new Date(i.createdAt).toLocaleString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1})}))}catch(n){console.error("获取建议与反馈信息失败",n)}},f=async()=>{try{const n=await p.get("/admin/wall/report");u.value=n.data.data.reports.map(t=>{var i;return{...t,formattedCreatedAt:new Date(t.createdAt).toLocaleString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1}),formattedWallCreatedAt:new Date((i=t.wall)==null?void 0:i.createdAt).toLocaleString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1})}})}catch(n){console.error("获取举报留言墙列表失败",n)}},V=async n=>{try{await p.delete(`/admin/wall/report/${n}`),localStorage.removeItem("reportedMessages"),E.success("删除举报留言成功")}catch(t){console.error("删除举报留言失败",t)}f()};return B(()=>{I(),f()}),(n,t)=>{const i=_("user-avatar"),g=_("User"),h=_("el-icon");return a(),o("div",W,[s("section",R,[t[1]||(t[1]=s("h2",{class:"section-title"},[s("i",{class:"icon icon-feedback"}),d(" 建议与反馈列表 ")],-1)),c.value.length>0?(a(),o("div",$,[(a(!0),o(N,null,U(c.value,(e,m)=>(a(),o("div",{key:m,class:"feedback-card"},[s("div",T,[r(i,{email:e.email},null,8,["email"]),s("div",j,[s("h3",null,l(e.name),1),s("p",q,l(e.email),1)]),s("time",G,l(e.formattedCreatedAt),1)]),s("div",H,[s("p",J,l(e.feedback),1)])]))),128))])):(a(),o("div",K,t[0]||(t[0]=[s("p",null,"暂无建议与反馈",-1)])))]),s("section",O,[t[21]||(t[21]=s("h2",{class:"section-title"},[s("i",{class:"icon icon-report"}),d(" 举报留言列表 ")],-1)),u.value.length>0?(a(),o("div",P,[(a(!0),o(N,null,U(u.value,(e,m)=>{var v,w,k,y,b,C,A,L,x,S;return a(),o("div",{key:m,class:"report-card"},[s("div",Q,[s("div",X,[t[2]||(t[2]=s("label",null,"举报ID：",-1)),s("span",null,l(e.id),1)]),s("div",Y,[t[3]||(t[3]=s("label",null,"举报时间：",-1)),s("time",null,l(e.formattedCreatedAt),1)]),s("div",Z,[s("button",{onClick:Ns=>V(e.id)},"删除",8,ss)])]),s("div",ts,[s("div",es,[s("h4",ls,[s("i",ns,[r(h,null,{default:F(()=>[r(g)]),_:1})]),t[4]||(t[4]=d(" 举报人信息 "))]),s("div",os,[s("p",as,[t[5]||(t[5]=s("span",null,"邮箱：",-1)),s("span",null,l((v=e.user)==null?void 0:v.email),1)]),s("p",is,[t[6]||(t[6]=s("span",null,"昵称：",-1)),s("span",null,l((w=e.user)==null?void 0:w.nickname),1)]),s("p",ds,[t[7]||(t[7]=s("span",null,"举报时间：",-1)),s("time",null,l(e.formattedCreatedAt),1)])])]),s("div",rs,[t[15]||(t[15]=s("h4",{class:"info-title"},[s("i",{class:"icon icon-wall"}),d(" 被举报内容 ")],-1)),s("div",cs,[s("p",us,[t[8]||(t[8]=s("span",null,"留言墙ID：",-1)),s("span",null,l((k=e.wall)==null?void 0:k.id),1)]),s("p",ms,[t[9]||(t[9]=s("span",null,"留言墙标题：",-1)),s("span",null,l((y=e.wall)==null?void 0:y.name),1)]),s("p",ps,[t[10]||(t[10]=s("span",null,"留言内容：",-1)),s("span",null,l((b=e.wall)==null?void 0:b.content),1)]),s("p",_s,[t[11]||(t[11]=s("span",null,"留言图片：",-1)),s("img",{src:(C=e.wall)==null?void 0:C.photo,alt:"留言图片"},null,8,fs)]),s("p",gs,[t[12]||(t[12]=s("span",null,"留言点赞",-1)),s("span",null,l((A=e.wall)==null?void 0:A.likesCount),1)]),s("p",hs,[t[13]||(t[13]=s("span",null,"留言分类：",-1)),s("span",null,l((L=e.wall)==null?void 0:L.category),1)]),s("p",vs,[t[14]||(t[14]=s("span",null,"留言时间：",-1)),s("time",null,l(e.formattedWallCreatedAt),1)])])]),s("div",ws,[s("h4",ks,[s("i",ys,[r(h,null,{default:F(()=>[r(g)]),_:1})]),t[16]||(t[16]=d(" 发布者信息 "))]),s("div",bs,[s("p",Cs,[t[17]||(t[17]=s("span",null,"邮箱：",-1)),s("span",null,l((x=e.wall.User)==null?void 0:x.email),1)]),s("p",As,[t[18]||(t[18]=s("span",null,"昵称：",-1)),s("span",null,l((S=e.wall.User)==null?void 0:S.nickname),1)]),s("p",Ls,[t[19]||(t[19]=s("span",null,"发布时间：",-1)),s("time",null,l(e.formattedWallCreatedAt),1)])])])])])}),128))])):(a(),o("div",xs,t[20]||(t[20]=[s("p",null,"暂无举报留言",-1)])))])])}}}),Is=M(Ss,[["__scopeId","data-v-ae73c93a"]]);export{Is as default};
