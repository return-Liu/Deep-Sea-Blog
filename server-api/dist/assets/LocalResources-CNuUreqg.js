import{d as E,u as w,P as F,e as m,A as N,c as l,f as a,U as S,V as C,a as I,w as z,n as v,E as D,r as L,T as M,o as i,t as P,y as _}from"./index-BDg1WjkS.js";import{_ as R}from"./_plugin-vue_export-helper-DlAUqK2U.js";const V={class:"local-resources"},$={class:"local-resources-content"},A={key:0,class:"grid-container"},U=["title"],G=["alt"],K={class:"resource-info"},T={class:"file-size"},b=["title"],j={class:"resource-info"},q={key:1,class:"empty-state"},H=E({__name:"LocalResources",setup(J){var g;const k=w(),d=F(()=>k.user),r=m([]),n=m(0),o=m(null);o.value=((g=d.value)==null?void 0:g.id)||null;async function x(){try{const[s,t,c]=await Promise.all([v.get("/admin/article",{params:{userId:o.value}}),v.get("/admin/photography",{params:{userId:o.value}}),v.get("/admin/note",{params:{userId:o.value}})]);s.data.data.articles.forEach(e=>{e.userId===o.value&&(r.value.push({userId:e.userId,image:e.image,size:e.size}),n.value+=e.size)}),t.data.data.photography.forEach(e=>{e.userId===o.value&&(r.value.push({userId:e.userId,image:e.image,size:e.size}),n.value+=e.size)}),c.data.data.notes.forEach(e=>{e.userId===o.value&&(r.value.push({userId:e.userId,image:e.image,size:e.size}),n.value+=e.size)})}catch(s){console.error("获取数据失败:",s),D.error("获取数据失败，请稍后再试")}}function f(s){return s<1024?s+" B":s<1024*1024?(s/1024).toFixed(2)+" KB":s<1024*1024*1024?(s/(1024*1024)).toFixed(2)+" MB":(s/(1024*1024*1024)).toFixed(2)+" GB"}function B(s){const t=s.split("/").pop();return t?t.split("?")[0]:"未知文件名"}return N(()=>{x()}),(s,t)=>{var p;const c=L("el-card"),h=M("lazy");return i(),l("div",V,[t[2]||(t[2]=a("div",{class:"local-resources-header"},[a("h2",null,"本地文件"),a("p",{class:"local-resources-description"}," 你可以在这里查看你的所有本地文件。 ")],-1)),a("div",$,[r.value.length>0?(i(),l("div",A,[(i(!0),l(S,null,C(r.value,(u,e)=>{var y;return i(),l("div",{class:"grid-item",title:`${((y=d.value)==null?void 0:y.nickname)||"默认用户"}的本地文件`,key:e},[I(c,{shadow:"hover",class:"resource-card"},{default:z(()=>[P(a("img",{alt:`Image ${e+1}`,class:"resource-image"},null,8,G),[[h,u.image]]),a("div",K,[a("p",null,_(B(u.image)),1),a("p",T,_(f(u.size)),1)])]),_:2},1024)],8,U)}),128)),a("div",{class:"grid-item",title:`${((p=d.value)==null?void 0:p.nickname)||"默认用户"}的总文件大小`},[I(c,{shadow:"hover",class:"resource-card total-size-card"},{default:z(()=>[a("div",j,[t[0]||(t[0]=a("h2",null,"总文件大小",-1)),a("p",null,_(f(n.value)),1)])]),_:1})],8,b)])):(i(),l("div",q,t[1]||(t[1]=[a("p",null,"你还没有上传任何文件,",-1),a("p",null,"你可以在进行操作。",-1)])))])])}}}),W=R(H,[["__scopeId","data-v-0fcc9033"]]);export{W as default};
