import{d as g,e as f,c as y,f as m,a as o,w as n,g as b,h as a,i as h,r as d,o as x,m as C,q as E,n as c,E as l}from"./index-BDg1WjkS.js";import{_ as K}from"./_plugin-vue_export-helper-DlAUqK2U.js";const R={class:"register-container"},F={class:"register-card"},N=g({__name:"Register",setup(U){const _=h();let e=f({username:"",nickname:"",email:"",password:""}),k=f(null),w=()=>e.value.username?e.value.nickname?e.value.email?e.value.password?!0:(l.error("请输入密码~"),!1):(l.error("请输入邮箱~"),!1):(l.error("请输入昵称~"),!1):(l.error("请输入用户名~"),!1),v=async()=>{try{return await c.post("/auth/check",{nickname:e.value.nickname,email:e.value.email}),!0}catch{return l.error("昵称或邮箱已存在，请更换~"),!1}},p=async()=>{if(w()&&await v())try{(await c.post("/auth/sign_up",{username:e.value.username,nickname:e.value.nickname,email:e.value.email,password:e.value.password})).data.status&&(l.success("注册成功"),_.push({path:"/login"}))}catch(s){if(console.error("注册失败:",s),s.response&&s.response.data){const r=s.response.data;r.errors&&r.errors.forEach(u=>{l.error(u)})}else l.error("注册失败，请重试")}};return(s,r)=>{const u=d("el-input"),i=d("el-form-item"),V=d("el-button");return x(),y("div",R,[m("div",F,[r[5]||(r[5]=m("h2",{class:"register-title"},"逸刻时光-YiKe注册",-1)),o(a(E),{onKeydown:b(a(p),["enter"]),model:a(e),ref_key:"registerFormRef",ref:k},{default:n(()=>[o(i,{label:"用户名",prop:"username"},{default:n(()=>[o(u,{modelValue:a(e).username,"onUpdate:modelValue":r[0]||(r[0]=t=>a(e).username=t),placeholder:"请输入用户名"},null,8,["modelValue"])]),_:1}),o(i,{label:"昵称",prop:"nickname"},{default:n(()=>[o(u,{modelValue:a(e).nickname,"onUpdate:modelValue":r[1]||(r[1]=t=>a(e).nickname=t),placeholder:"请输入昵称"},null,8,["modelValue"])]),_:1}),o(i,{label:"邮箱",prop:"email"},{default:n(()=>[o(u,{modelValue:a(e).email,"onUpdate:modelValue":r[2]||(r[2]=t=>a(e).email=t),placeholder:"请输入邮箱"},null,8,["modelValue"])]),_:1}),o(i,{label:"密码",prop:"password"},{default:n(()=>[o(u,{type:"password",modelValue:a(e).password,"onUpdate:modelValue":r[3]||(r[3]=t=>a(e).password=t),placeholder:"请输入密码"},null,8,["modelValue"])]),_:1}),o(i,null,{default:n(()=>[o(V,{type:"primary",onClick:a(p),class:"register-button"},{default:n(()=>r[4]||(r[4]=[C(" 注册 ")])),_:1},8,["onClick"])]),_:1})]),_:1},8,["onKeydown","model"]),r[6]||(r[6]=m("p",{class:"register-tip"}," 该注册账号只限于逸刻时光-YiKe网站内测试、学习，请妥善保护自己个人隐私和个人信息，以免造成不必要的影响，谢谢。 ",-1))])])}}}),q=K(N,[["__scopeId","data-v-3b659468"]]);export{q as default};
